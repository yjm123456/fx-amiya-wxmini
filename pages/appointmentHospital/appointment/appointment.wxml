<!--pages/appointmentHospital/appointment/appointment.wxml-->
<view class="info">
        <view class="title">
            <text>预约信息</text>
        </view>
        <view class="input_group">
            <input wx:if="{{show}}" type="text" disabled="{{true}}" value="{{itemInfoName}}" bindtap="selectProject" placeholder="请选择项目"/>
            <input type="text" bindinput="handleNameChange" placeholder="请输入姓名"/>
            <input type="text" bindinput="handlePhoneChange" placeholder="请输入手机号"/>
            <view class="code_warp">
                <input type="text" bindinput="handleCodeChange" placeholder="请输入验证码"/>
            <view class="code_btn" wx:if="{{send}}" catchtap="sendCode">获取验证码</view>
            <view wx:else  class="code_btn">{{seconds}}秒后重新发送</view>
            </view>
            <view wx:if="{{show}}" class="item_btn">项目</view>
            
        </view>
    </view>
<view class="container">
    <view class="select-city">
        <view class="title">
            <text>预约城市</text>
        </view>
        <view class="city">
        </view>
    </view>
    <view class="appoint-area">
        <view class="area-tips">
            <text wx:if="{{!selectedCity}}">当前地区:</text>
            <text wx:if="{{selectedCity}}">已选地区</text>
        </view>
        <view class="select-area">
            <view class="current-area"><text class="local">{{province+'-'+city+'-'+district}}</text></view>
            <view class="change-city">
                <text class="iconfont icon-qiehuan"></text>
                <picker mode="region" bindchange="bindAreaChange" value="{{area}}">
                    <text>城市</text>
                </picker>
            </view>
        </view>
    </view>
</view>
<view class="appointment_car">
    <view class="select-city">
        <view class="title">
            <text>预约叫车</text>
        </view>
    </view>
    <textarea class="address" bindinput="handleAddress" placeholder-class="address2" placeholder="请输入上车地址"></textarea>
    <view class="origin_picker">
            <input  class="" type="text" value="{{hospital?hospital:''}}" placeholder="请选择预约医院" bindinput="handlerHospitalChange" style="width:650rpx;height: 100%;color:#000;" />
            <picker class="origin_select" catchchange="bindPickerBuyersName" range-key="name" range="{{Merchlist}}">
                <view class="ar">选择</view>
            </picker>
    </view>
</view>

<!-- 切换城市 -->
<van-popup z-index="{{5}}" safe-area-inset-top='{{true}}' show="{{ cityModel }}" position="right" bind:close="onCancel" custom-style="height: 100%;width:78%;margin-top:80rpx;">
    <view class="popup_con">
        <view class="pro_content">
            <view class="popup_item">
                <!-- 热门城市 -->
                <view class="hot_con">
                    <view class="type_name">热门城市</view>
                    <view class="name_com">
                        <block wx:for="{{hosCityList}}" wx:key="index">
                            <view class="popup_text  {{item.id==currentId?'active':'popup_text'}}" bindtap="selectedCity" data-cityid='{{item.id}}' data-item="{{item}}" data-type="1">{{item.name}}</view>
                        </block>
                    </view>
                </view>
                <view class="hot_con">
                    <view class="cwkt">预约地区</view>
                </view>

                <view class="item_type">
                    <block wx:for="{{cityList}}" wx:key="index">
                        <view class="{{item.city.length !=0 ? 'items' : ''}}">
                            <view class="type_name" wx:if="{{item.city.length !=0}}">{{item.provinceName}}</view>
                            <view class="name_com">
                                <block wx:for="{{item.city}}" wx:key="index" wx:for-item="i">
                                    <view class="popup_text {{i.id==currentIds?'actives':'popup_text'}}" data-item="{{i}}" data-type="2" bindtap="selectedCity">{{i.name}}</view>
                                </block>
                            </view>
                        </view>
                    </block>
                </view>
            </view>
        </view>
    </view>
</van-popup>
<!-- 日历 -->
<calendar bind:select="select" bind:toggleYearMonth="toggleYearMonth" defaultValue="{{currentDate}}" dateList="{{dateList}}" />
<!-- 底部 -->
<footer defaultValue="{{currentDate}}" hospitalId="{{hospitalItem.id}}" bindAppointChange="appointmentChange" itemInfoId="{{itemInfoId}}" appointArea="{{province+'-'+city+'-'+district}}" surplusQuantity="{{surplusQuantity}}" />
<view class="submit" bindtap="submit">提交</view>
<!-- 切换城市弹窗 -->
<van-popup
      show="{{ projectModel }}"
      position="right"
      bind:close="onCancel"
      custom-style="height: 100%;width:78%"
    >
    <view class="popup_con">
      <view class="pro_content">
        <view class="popup_item">
          <view class="item_type">
            <block  wx:for="{{AmiyaGoodsDemandList}}" wx:key="index">
              <view class="items">
                <view class="type_name" wx:if="{{item.goodsDemandList.length !=0}}">{{item.departmentName}}</view>
                <view  class="name_com">
                  <block wx:for="{{item.goodsDemandList}}" wx:key="index" wx:for-item="i">
                    <view class="popup_text {{i.id==currentId?'active':'popup_text'}}" bindtap="selected" data-item="{{i}}">{{i.projectName}}</view>
                  </block>
                </view>
              </view>
            </block>
          </view>
        </view>  
      </view>
    </view>
    </van-popup>
    <!-- 授权手机号 -->
<authPhone control="{{controlAuthPhone}}" info="沟通叫车信息" bind:successBindPhone="successBindPhone" bind:cancelBindPhone="cancelBindPhone"></authPhone>
    
