<view class="wrapper">
    <swiper class='banner' indicator-dots='true' autoplay='true' interval='5000' duration='1000'>
        <block wx:for="{{goodsInfo.carouselImageUrls}}" wx:for-index="index" wx:key="id">
            <swiper-item>
                <image src='{{item.picUrl}}' class='img_slide' mode='aspectFill'></image>
            </swiper-item>
        </block>
    </swiper>
    <view class="goods_info">
        <view class="price">
            <text>{{goodsInfo.integrationQuantity}}积分</text>
        </view>
        <view class="description">{{goodsInfo.name }}</view>
    </view>
    <!-- 虚拟商品到店信息 -->
    <view class="item_spe" bindtap="cityChoice" >
        <text>所在城市</text>
        <view class="city_con">
            <text class="city_text">{{cityNames}}</text>
            <text class="iconfont icon-arrow-left"></text>
        </view>
    </view>
    <!-- 如果为虚拟产品显示选择门店 -->
    <view class="item_spe" bindtap="selectStore"  data-cityname="{{cityNames}}">
        <text>选择门店</text>
        <view class="city_con">
            <text class="city_text">{{storeInfo.name}}</text>
            <text class="iconfont icon-arrow-left"></text>
        </view>
    </view>
    <view class="details">
        <view>
            <van-divider contentPosition="center" customStyle="padding:0 200rpx">
                商品详情
            </van-divider>
        </view>
        <view>
            <rich-text nodes="{{goodsInfo.goodsDetailHtml}}"></rich-text>
        </view>
    </view>
    <van-goods-action>
        <van-goods-action-button color="#7232dd" text="立即购买" bind:click="purchase" />
    </van-goods-action>
    <van-goods-action>
        <van-goods-action-icon icon="chat-o" text="客服" open-type='contact' />
        <van-goods-action-icon icon="cart-o" text="购物车" bind:click="toShoppingCart" />
        <!-- <van-goods-action-button data-hospitalid="{{storeInfo.id}}" data-city="{{cityValue}}" data-cityName="{{cityNames}}" data-cityId="{{cityIds}}" data-type="1" data-hospitalSalePrice="{{storeInfo.hospitalSalePrice}}" data-allmoney="{{goodsInfo.quantity==1 ?(storeInfo.hospitalSalePrice ? storeInfo.hospitalSalePrice : goodsInfo.salePrice ):totalPrice}}" text="加入购物车" type="warning" bind:click="addToShoppingCart" /> -->
        <van-goods-action-button color="#7232dd" text="立即购买" bind:click="purchase" />
    </van-goods-action>
</view>
<van-toast id="van-toast" />
<standard control="{{control}}" bindmyevent="onSelectStandard" bindresetControlStandard="resetControlStandard" goods="{{goodsInfo}}" />
<!-- 城市选择 弹出层 -->
<van-popup show="{{ cityShow }}" position="bottom" bind:close="onClose">
        <view class="canCal_submit">
            <text bind:close="onClose">取消</text>
            <text bindtap="cityConfirms" data-cityName="{{cityName}}" data-cityId="{{cityId}}">确定</text>
        </view>
        <view class="citys">
            <!-- cityLists(包含合作城市id和name) -->
            <block wx:for="{{cityLists}}" wx:key="index">
                <view class="city_name {{current == index ? 'checked_name' : ''}}" bindtap="citysName" data-index="{{index}}" data-cityinfo="{{item}}">{{item.name}}</view>
            </block>
        </view>
    </van-popup>