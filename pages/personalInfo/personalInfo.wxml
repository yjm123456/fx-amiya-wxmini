<!--pages/personalInfo/personalInfo.wxml-->
<view class="container">
    <view class="item_list">
        <view class="avatar_item">
            <view class="avatar_url">头像</view>
            <view wx:if="{{!isEdit}}" class="avatar_img">
                <image class="avatar" src="{{userInfo.avatarUrl}}" mode="widthFix"></image>
            </view>
            <view wx:else class="info_text edit_image">
                        <van-uploader preview-size="120rpx" max-count="1" deletable="{{true}}" bind:delete="delete" file-list="{{ fileList }}" bind:after-read="afterRead" />
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">昵称</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <text>{{userInfo.nickName}}</text>
            </view>
            <view wx:else class="info_text">
                <van-field value="{{ nickName }}" placeholder="请输入昵称" custom-style="background-color:transparent;padding:0;color:#fff;" border="{{ false }}" bind:change="onNickNameChange" />
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">真实姓名</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <text>{{!userInfo.name?"":userInfo.name}}</text>
            </view>
            <view wx:else class="info_text">
                <van-field value="{{ Name }}" placeholder="请输入姓名" custom-style="background-color:transparent;padding:0;color:#fff;" border="{{ false }}" bind:change="onNameChange" />
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">手机号</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <text>{{!userInfo.phone?"":userInfo.phone}}</text>
            </view>
            <view wx:else class="info_text">
                <van-field  value="{{ phone }}" placeholder="请输入姓名" custom-style="background-color:transparent;padding:0;color:#fff;" border="{{ false }}" bind:change="onPhoneChange" />
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">性别</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <van-radio-group value="{{ gender }}" direction='horizontal' >
                    <view class="rgroup">
                        <van-radio style="margin-left: 20rpx;" checked-color="#DEC350" name="1">保密</van-radio>
                        <van-radio style="margin-left: 20rpx;" checked-color="#DEC350" name="2">男</van-radio>
                        <van-radio style="margin-left: 20rpx;" checked-color="#DEC350" name="3">女</van-radio>
                    </view>
                </van-radio-group>
            </view>
            <view wx:else class="info_text">
                <van-radio-group  value="{{ gender }}" bind:change="onGenderChange">
                    <view class="rgroup">
                        <van-radio  checked-color="#DEC350" name="1">保密</van-radio>
                        <van-radio style="margin-left: 20rpx;" checked-color="#DEC350" name="2">男</van-radio>
                        <van-radio style="margin-left: 20rpx;" checked-color="#DEC350" name="3">女</van-radio>
                    </view>
                </van-radio-group>
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">个性签名</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <text>{{!userInfo.personalSignature?"":userInfo.personalSignature}}</text>
            </view>
            <view wx:else class="info_text">
                <van-field value="{{ personalSignature }}" placeholder="请输入个性签名" custom-style="background-color:transparent;padding:0;color:#fff;" border="{{ false }}" bind:change="onPersonalSignatureChange" />
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">出生日期</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <text>{{date}}</text>
            </view>
            <view wx:else class="info_text" bindtap="cleander">
                <picker mode="date" end='{{timeNow}}' bindchange="bindChange" value="{{date}}">
                    <van-field value="{{ !date ? '请选择':date}}" custom-style="background-color:transparent;padding:0;color:#fff;" border="{{ false }}" />
                </picker>
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">所在城市</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <text>{{!area1?"": city+"-"+area1}}</text>
            </view>
            <view wx:else class="info_text">
                <picker mode="region" bindchange="bindAreaChange" value="{{area}}">
                    <text>{{ !area1?"请选择": city+"-"+area1 }}</text>
                </picker>
            </view>
        </view>
        <view class="item">
            <view class="avatar_url">详细地址</view>
            <view wx:if="{{!isEdit}}" class="info_text">
                <text>{{!userInfo.detailAddress?"":userInfo.detailAddress}}</text>
            </view>
            <view wx:else class="info_text">
                <van-field value="{{ detailAddress }}" placeholder="请输入个性签名" custom-style="background-color:transparent;padding:0;color:#fff;" border="{{ false }}" bind:change="onDetailAddressChange" />
            </view>
        </view>
    </view>


</view>
<view wx:if="{{!isEdit}}" class="confirm" bindtap="edit">
    <van-button color="#DEC350" custom-style="width:100%;border:none;">
        <view>编辑</view>
    </van-button>
</view>
<view wx:if="{{isEdit}}" class="confirm">
    <van-button bind:click="saveInfo" color="#DEC350" custom-style="width:100%;border:none;">
        <view>保存</view>
    </van-button>
</view>

<van-popup show="{{ show }}" closeable custom-style="height: 300rpx;width:500rpx;border-radius:20rpx;display:flex;justify-content:center;align-items:center;" bind:close="onClose">
    <van-field maxlength="10" custom-style="height:background-color:e2e2e2;border:1rpx solid #e2e2e2;border-radius:20rpx" model:value="{{ newName }}" placeholder="请输入新的昵称" border="{{ false }}">
        <van-button slot="button" size="small" type="primary" bindtap="updateNickName">
            确认修改
        </van-button>
    </van-field>
</van-popup>